What I Talk About When I Talk About CLI tool
====

at [YAPC::Asia 2014](http://yapcasia.org/2014/talk/show/b49cc53a-027b-11e4-9357-07b16aeab6a4)


## メモ

- 自分がCLIツールを作るときに意識していることを話す
- 普段あまり話されない部分について
- Warning
    - 本トークには個人的な思想がいくつか含まれています
        - 賛同してもらえるところは適用してもらいたい
        - 賛同できない部分はビール飲みながら議論しましょう！
- 対象オーディエンス
    - とにかく何か新しいツールを作り始めたい
        - 作りたいツール，サービスが見つからない
        - webサービスより敷居は低い
            - サーバいらない，DBいらない
    - CLIツールを作りたい
    - CLIツールを既に作ってるけど，使いやすくしたい
- 他の人に使ってもらえるようなCLIツール
- 前提
    - もちろん自分だけのために，自分の生活/仕事を楽にするためにツールをつくることは素晴らしい
    - どうせ作るなら自分以外のユーザを幸せにしたい
    - 自分以外のユーザに「使ってもらえる」ツールを作るには？
    - 自分以外のユーザに「便利だ」と思われるようなツールを作るには？
- CLIツールとは？
    - Command Line Interface tool, CLI
    - Character User Interface, CUI
    - Console User Interface, CUI
    - <-> GUI
- CLIの利点は？
    - 処理の自動化が容易である
    - ファイルに保存して何度も実行できる
    - インターフェースがGUIと比べてシンプル（ユーザの入力処理）
        - 内部状態が少ない
    - キーボードないで完結するため，手作業が容易
        - オートコンプリートなどを使えばより迅速な作業が可能
- CLIの欠点は？
    - 習得コストがある
    - 選択肢やヘルプなどを画面上に表示するのに限界がある
    - 図形的なものの操作や編集には向かない，不可能
- CLIツールのユーザとは？
    - ツールやサービスをつくるときに大事なのは，誰に向けて作るのか？ということ誰が潜在ユーザなのか？
    - 少なくとも所謂「黒い画面」を使うユーザが対象になる
        - 対象はエンジニアになる
        - 自分と同じ世界のユーザ
        - 一般向けのサービスをつくるよりも考えることは少ない，考えやすい
        - そこから，エンジニア全般なのか，Ops向けなのか，Dev向けなのか，DevOps向けなの
- 初めてのCLIツール
    - run.sh
    - おめでとう！君はCLIツールを作り上げた！
    - これは最高にクールだ．他のチームメンバー，あわよくばインターネット先のユーザに使ってもらいたい！
    - じゃあどうしよう？何が必要だろうか？こいつを便利にしたい！
- 「便利な」/「良い」CLIツールとは？
    - 直感的である
        - 他のCLIツールに慣れ親しんだ人にも違和感なく使える
            - CLIには長い歴史がある
            - つまり慣習が存在する
            - 慣習から外れない
                - e.g.,
                - ときには慣習から外れることも必要，ただ僕らが作るほとんどのツールにそれは必要ない
            - 使ったユーザに「これは正しく動いている」と感じさせる
            -
        - CLIツールになれていないひとでもすぐに使い始めることができる
        - 一つのことに集中する
        - CLIのUI/UX
            - 入力の仕方は？
            - 出力は？
            - オプション引数は自然か?
            - 対話処理は多すぎないか?
                - 対話処理は最後の手段！(<-やりたいのはよくわかる)
    - 設定できる/設定しやすい
        - 何度も使われることを考慮する
        - 毎回同じことを入力させない
        - 環境変数を使う，gitconfigを使う，dotファイルを作る
            - 機会が扱いやすい，かつユーザ読みやすいフォーマットを選ぶ
                - json，YAML，DSL，hashicorp/hcl
        - ファンタスティックなことをしない
        - 設定ファイルは1つにする！
    - ロギング/デバッグ
        - デバック可能にする，デバックオプションを準備する
        - はじめから準備する
        - ツールに不具合が起ったときにソースを見なくても何が起ってるのか理解できるように
            - 見るべきソースの場所のあたりをつける
    - 例外処理を適切にする
        - HTTPライブラリのエラーをそのまま表示しない
            - ラップしてそのツールに見合った出力を出力する
    - 適切なドキュメントが準備されている
        - わかりやすいREADME.mdを書く
    - サポート(?)
        -






## Agenda
